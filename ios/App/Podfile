platform :ios, '13.0'
use_frameworks! :linkage => :static
project 'App.xcodeproj'

target 'App' do
  # Node modules live two levels up from ios/App in the monorepo layout.
  node_modules_path = File.expand_path('../../node_modules', __dir__)

  pod 'Capacitor', :path => "#{node_modules_path}/@capacitor/ios"
  pod 'CapacitorCordova', :path => "#{node_modules_path}/@capacitor/ios"

  pod 'CapacitorApp', :path => "#{node_modules_path}/@capacitor/app"
  pod 'CapacitorHaptics', :path => "#{node_modules_path}/@capacitor/haptics"
  pod 'CapacitorKeyboard', :path => "#{node_modules_path}/@capacitor/keyboard"
  pod 'CapacitorStatusBar', :path => "#{node_modules_path}/@capacitor/status-bar"
  pod 'CapacitorSplashScreen', :path => "#{node_modules_path}/@capacitor/splash-screen"

  post_install do |installer|
    installer.pods_project.targets.each do |target|
      target.build_configurations.each do |config|
        config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '13.0'
      end
    end
  end
end

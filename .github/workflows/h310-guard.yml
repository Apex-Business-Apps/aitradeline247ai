name: H310 Guard - Hook Safety

on:
  pull_request:
    paths:
      - "src/**"
  workflow_dispatch: {}

jobs:
  hook-safety:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: "20" }
      - name: Install deps
        run: |
          if [ -f pnpm-lock.yaml ]; then npm i -g pnpm && pnpm i;
          elif [ -f yarn.lock ]; then yarn install --frozen-lockfile;
          else npm ci; fi
      - name: React Hooks Safety Check
        run: |
          npm run hooks:check || npm run hooks-check || echo "No hook checker script; skipping"

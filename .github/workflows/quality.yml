name: Quality - ESLint & Scanner

on:
  pull_request:
    paths:
      - "src/**"
      - "package.json"
      - "pnpm-lock.yaml"
      - "yarn.lock"
      - "package-lock.json"
  workflow_dispatch: {}

jobs:
  lint:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: "20" }
      - name: Install deps
        run: |
          if [ -f pnpm-lock.yaml ]; then npm i -g pnpm && pnpm i;
          elif [ -f yarn.lock ]; then yarn install --frozen-lockfile;
          else npm ci; fi
      - name: ESLint
        run: |
          npm run lint || npm run eslint || echo "No lint script; skipping"
